<template>
    <div :class="'aui-carousel-list-item ' + (props.class || '')" :style="'width:' + width + 'px;'">
        <slot></slot>
    </div>
</template>
<script>
    import { debounce } from '@/utils/utils';
    export default {
        name: 'Carousel-item',
        data() {
            return {
                width: 0
            }
        },
        methods: {
            onWindowResize() {
                const carouselComponent = this.$parentVNode.parentVNode.context;
                const width = carouselComponent.$refs.listWrap.clientWidth;

                this.setData({
                    width
                });
            }
        },
        mounted() {
            window.addEventListener('resize', this.tempfun = debounce(this.onWindowResize), false);

            setTimeout(() => {
                const carouselComponent = this.$parentVNode.parentVNode.context;
                const width = carouselComponent.$refs.listWrap.clientWidth;

                this.setData({
                    width
                });
            }, 100);
        },
        unmounted() {
            window.removeEventListener('resize', this.tempfun);
        }
    }
</script>